<!DOCTYPE html>
<html lang="fr">
<head>
  <link rel="icon" type="image/png" href="/favicon.png" />
  <meta charset="UTF-8">
  <title>Dialogue style Pokémon</title>
  <link rel="stylesheet" href="style.css">
</head>
<style>
    *,
*::before,
*::after {
  box-sizing: border-box;
}

body {
  margin: 0;
  min-height: 100vh;
  background: #222;
  font-family: monospace;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 16px;
}

/* CONTENEUR PRINCIPAL */
.scene {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 16px;
  width: 100%;
  max-width: 480px;
}

/* SPRITE */
.sprite {
  max-height: 40vh;
  display: flex;
  justify-content: center;
  align-items: flex-end;
}

.sprite img {
  width: 54px;
  height: 106px;
  image-rendering: pixelated;
  image-rendering: crisp-edges;
  transform: scale(3);
  transform-origin: bottom center;
  animation: idle 1s infinite steps(1);
}

/* BOÎTE DE DIALOGUE */
.dialogue-box {
  width: 100%;
  background: #ffffff;
  border: 4px solid #000000;
  padding: 12px 16px 24px;
  position: relative;
  cursor: pointer;
}

/* TEXTE */
.text {
  font-size: 1rem;
  line-height: 1.4;
  min-height: 3.5em;
  color: #000;
}

/* FLÈCHE */
.arrow {
  position: absolute;
  bottom: 6px;
  right: 10px;
  font-size: 20px;
  display: none;
  animation: blink 1s infinite;
}

/* ANIMATIONS */
@keyframes blink {
  0%, 50%, 100% { opacity: 1; }
  25%, 75% { opacity: 0; }
}

@keyframes idle {
  0%   { transform: scale(3) translateY(0); }
  50%  { transform: scale(3) translateY(-2px); }
  100% { transform: scale(3) translateY(0); }
}

/* RESPONSIVE */
@media (max-width: 600px) {
  body {
    padding: 12px;
  }

  .scene {
    gap: 12px;
  }

  .sprite img {
    transform: scale(2.2);
  }

  .dialogue-box {
    padding: 10px 12px 20px;
  }

  .text {
    font-size: 0.95rem;
  }
}

@media (max-height: 500px) {
  .sprite {
    max-height: 30vh;
  }
  .sprite img {
    transform: scale(2);
  }
}

</style>
<body>
  <div class="scene">
    <div class="sprite">
      <img src="barman.png">
    </div>

    <div class="dialogue-box" id="dialogueBox">
      <div class="text" id="text"></div>
      <div class="arrow" id="arrow">▶</div>
    </div>
  </div>

  <script>
    const dialogues = [
  "Bienvenue jeune flibustier!",
  "Qu'est ce qu'y t'amène ici ?",
  "Oh encore un qui viens me parler de Jérome Labarre...",
  "Il venait souvent avec son équipage mais ils n'étaient pas très sociables.",
  "En revanche, je crois qu'il aimait beaucoup son navire."
];

let index = 0;
let charIndex = 0;
let isTyping = false;
let intervalId = null;

const textEl = document.getElementById("text");
const arrowEl = document.getElementById("arrow");
const dialogueBox = document.getElementById("dialogueBox");

function typeText() {
  isTyping = true;
  arrowEl.style.display = "none";
  textEl.textContent = "";
  charIndex = 0;

  const currentText = dialogues[index];

  intervalId = setInterval(() => {
    textEl.textContent += currentText[charIndex];
    charIndex++;

    if (charIndex >= currentText.length) {
      clearInterval(intervalId);
      isTyping = false;
      arrowEl.style.display = index < dialogues.length - 1 ? "block" : "none";
    }
  }, 40);
}

function nextDialogue() {
  if (isTyping) return;

  index++;
  if (index < dialogues.length) {
    typeText();
  }
}

dialogueBox.addEventListener("click", nextDialogue);

// Démarrage
typeText();

  </script>
</body>
</html>
